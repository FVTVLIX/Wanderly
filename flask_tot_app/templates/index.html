<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wanderly | AI Travel Planner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <a href="{{ url_for('index') }}" class="nav-logo">WANDERLY</a>
            <div class="nav-links">
                <a href="{{ url_for('index') }}">New Search</a>
                {% if current_user.is_authenticated %}
                <a href="{{ url_for('profile') }}">My Profile</a>
                <a href="{{ url_for('logout') }}">Logout</a>
                {% else %}
                <a href="{{ url_for('login') }}">Login</a>
                <a href="{{ url_for('register') }}">Sign Up</a>
                {% endif %}
                <button id="darkModeToggle" class="btn-secondary-sm"
                    style="border-radius: 50%; width: 32px; height: 32px; padding: 0; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">WHERE DREAMS BECOME JOURNEYS</h1>
            <p class="hero-subtitle">Experience the world with AI-curated travel strategies designed just for you.</p>

            <form action="{{ url_for('analyze') }}" method="POST" class="hero-search-form" id="searchForm">
                <div class="input-wrapper" style="flex-direction: column; gap: 0;">
                    <div style="display: flex; width: 100%; border-bottom: 2px solid #000;">
                        <i class="fa-solid fa-location-dot search-icon" style="padding-top: 1.5rem;"></i>
                        <input type="text" name="origin" placeholder="Where are you starting from? (Optional)"
                            autocomplete="off">
                    </div>
                    <div style="display: flex; width: 100%;">
                        <i class="fa-solid fa-magnifying-glass search-icon" style="padding-top: 1.5rem;"></i>
                        <input type="text" name="query" placeholder="Where do you want to go?" required
                            autocomplete="off">
                        <button type="submit" class="btn-search">
                            Let's Go <i class="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </form>

            <div class="hero-tags">
                <span
                    style="background: #000; color: #FFF; padding: 0.2rem 0.5rem; transform: rotate(-2deg);">Trending:</span>
                {% for item in trending %}
                <button type="button" onclick="fillSearch('{{ item.query }}')">{{ item.label }}</button>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- App Details Section -->
    <section class="container" style="margin-bottom: 4rem;">
        <div class="info-card" style="transform: rotate(-1deg); margin-bottom: 3rem;">
            <h2 style="text-align: center; margin-bottom: 1rem;">Why Wanderly?</h2>
            <p style="font-size: 1.1rem; text-align: center; max-width: 800px; margin: 0 auto;">
                Wanderly isn't just another travel planner. It's your personal AI travel agent that understands your
                vibe.
                Whether you're a foodie hunting for the best street eats in Osaka, a history buff exploring Rome's
                ruins,
                or an adventurer seeking Iceland's hidden waterfalls, Wanderly crafts the perfect itinerary for you.
            </p>
        </div>

        <div class="strategies-grid" style="margin-bottom: 3rem;">
            <div class="info-card" style="background: var(--accent-2); transform: rotate(1deg);">
                <h3 style="margin-bottom: 0.5rem;"><i class="fa-solid fa-robot"></i> AI-Powered</h3>
                <p>We use advanced AI models to generate unique, non-generic travel strategies tailored to your specific
                    interests and budget.</p>
            </div>
            <div class="info-card" style="background: var(--accent-3); transform: rotate(-1deg);">
                <h3 style="margin-bottom: 0.5rem;"><i class="fa-solid fa-wallet"></i> Budget Smart</h3>
                <p>Get realistic cost breakdowns for flights, lodging, food, and activities so you can plan without
                    breaking the bank.</p>
            </div>
            <div class="info-card" style="background: var(--accent-4); transform: rotate(1deg);">
                <h3 style="margin-bottom: 0.5rem;"><i class="fa-solid fa-map-location-dot"></i> Visual Itineraries</h3>
                <p>Visualize your trip with interactive maps and day-by-day breakdowns that make navigation a breeze.
                </p>
            </div>
        </div>

        <div class="info-card" style="background: #FFF; border: 3px dashed #000; padding: 2rem;">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-size: 2rem;"><i class="fa-solid fa-key"></i> Bring Your Own Keys</h3>
                <p style="font-size: 1.1rem; margin-top: 0.5rem;">To unlock the full power of Wanderly, create an
                    account and add your own API keys.</p>
            </div>

            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                <div style="text-align: center;">
                    <i class="fa-brands fa-google" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                    <h4 style="margin-bottom: 0.5rem;">Google Gemini</h4>
                    <p>Fast, efficient, and great for quick itinerary generation.</p>
                </div>
                <div style="text-align: center;">
                    <i class="fa-solid fa-bolt" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                    <h4 style="margin-bottom: 0.5rem;">OpenAI GPT-4</h4>
                    <p>Deep reasoning for complex, multi-city trips and detailed history.</p>
                </div>
                <div style="text-align: center;">
                    <i class="fa-solid fa-brain" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                    <h4 style="margin-bottom: 0.5rem;">Anthropic Claude</h4>
                    <p>Natural, creative, and human-like travel suggestions.</p>
                </div>
            </div>

            {% if not current_user.is_authenticated %}
            <div style="text-align: center;">
                <a href="{{ url_for('register') }}" class="btn-primary">Create Free Account</a>
                <p style="margin-top: 1rem; font-size: 0.9rem;">Already have an account? <a
                        href="{{ url_for('login') }}" style="text-decoration: underline; font-weight: 700;">Login
                        here</a>.</p>
            </div>
            {% else %}
            <div style="text-align: center;">
                <a href="{{ url_for('settings') }}" class="btn-primary">Manage API Keys</a>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loader-content">
            <div class="spinner"></div>
            <h3 class="loading-title" style="margin-top: 1rem; font-family: 'Anton', sans-serif; letter-spacing: 1px;">
                CRAFTING YOUR JOURNEY...</h3>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div
                style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem; font-weight: 700;">
                <span id="loadingStatus">Initializing...</span>
                <span id="loadingPercent">0%</span>
            </div>
        </div>
    </div>

    <script>
        // Dark Mode Logic
        const toggleBtn = document.getElementById('darkModeToggle');
        const body = document.body;
        const icon = toggleBtn.querySelector('i');

        // Check local storage
        if (localStorage.getItem('darkMode') === 'enabled') {
            body.classList.add('dark-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        }

        toggleBtn.addEventListener('click', () => {
            body.classList.toggle('dark-mode');

            if (body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                localStorage.setItem('darkMode', 'disabled');
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        });

        function fillSearch(text) {
            const input = document.querySelector('input[name="query"]');
            if (input) {
                input.value = text;
                input.focus();
            }
        }

        const form = document.getElementById('searchForm');
        if (form) {
            form.addEventListener('submit', function () {
                const overlay = document.getElementById('loadingOverlay');
                overlay.classList.remove('hidden');
                startLoadingAnimation();
            });
        }

        function startLoadingAnimation() {
            const progressBar = document.getElementById('progressBar');
            const statusText = document.getElementById('loadingStatus');
            const percentText = document.getElementById('loadingPercent');

            const messages = [
                "Packing virtual bags...",
                "Consulting travel spirits...",
                "Spinning the globe...",
                "Calculating fun coefficients...",
                "Bribing the pilot...",
                "Finding the best snacks...",
                "Checking weather patterns...",
                "Optimizing route for maximum joy..."
            ];

            let progress = 0;
            let messageIndex = 0;

            const interval = setInterval(() => {
                // Random increment between 1 and 3
                progress += Math.random() * 2 + 0.5;

                // Cap at 95% until actual load completes
                if (progress > 95) {
                    progress = 95;
                }

                // Update width and text
                progressBar.style.width = `${progress}%`;
                percentText.textContent = `${Math.round(progress)}%`;

                // Change message every ~15 ticks (approx 1.5s)
                if (Math.round(progress) % 15 === 0) {
                    messageIndex = (messageIndex + 1) % messages.length;
                    statusText.textContent = messages[messageIndex];
                }

            }, 100); // Update every 100ms
        }
    </script>
</body>

</html>